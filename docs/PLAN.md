# ç‘æƒ³ãƒ»ãƒ¡ãƒ¢æ›¸ãç¿’æ…£åŒ–ã‚¢ãƒ—ãƒª å¤–éƒ¨å…¬é–‹è¨­è¨ˆãƒ—ãƒ©ãƒ³

**æœ€çµ‚æ›´æ–°**: 2026-02-03
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: Phase 1 å®Ÿè£…ä¸­

---

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

**ç›®æ¨™**: å€‹äººåˆ©ç”¨ã®ç‘æƒ³ãƒ»ãƒ¡ãƒ¢æ›¸ãç¿’æ…£åŒ–ã‚¢ãƒ—ãƒªã‚’å¤–éƒ¨å…¬é–‹ã—ã€æ—¥æœ¬ä¸­ã§ä½¿ã£ã¦ã‚‚ã‚‰ã†

**æ–¹é‡**:
- ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ: å€‹äººåˆ©ç”¨ï¼ˆç‘æƒ³ãƒ»ç¿’æ…£åŒ–ã«èˆˆå‘³ãŒã‚ã‚‹å€‹äººï¼‰
- åç›Šãƒ¢ãƒ‡ãƒ«: ãƒ•ãƒªãƒ¼ãƒŸã‚¢ãƒ ï¼ˆã¾ãšã¯åŸºæœ¬æ©Ÿèƒ½ã‚’ç„¡æ–™æä¾›ã€å°†æ¥çš„ã«ãƒ—ãƒ¬ãƒŸã‚¢ãƒ æ©Ÿèƒ½ã§åç›ŠåŒ–ï¼‰
- ãƒ¦ãƒ¼ã‚¶ãƒ¼è¦æ¨¡: å°è¦æ¨¡ï¼ˆã€œ1,000äººï¼‰ã§MVPæ¤œè¨¼
- ãƒ‡ã‚¶ã‚¤ãƒ³: Appleé¢¨ã®é«˜ç´šæ„Ÿã€ä½¿ã„ã‚„ã™ã•ãƒ»è¦‹ã‚„ã™ã•é‡è¦–ã€Core Web Vitals æœ€é©åŒ–
- åºƒå‘Šåå…¥ã¯é™¤å¤–

---

## 1. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

### 1.1 ä¸»è¦ãƒ†ãƒ¼ãƒ–ãƒ«

#### **users** - ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†
```sql
- id (UUID, PK)
- email (VARCHAR, UNIQUE)
- password_hash (VARCHAR, nullable)
- display_name (VARCHAR)
- auth_provider ('email' | 'google')
- plan_type ('free' | 'premium')
- timezone, locale
- created_at, updated_at
```

#### **sessions** - ã‚»ãƒƒã‚·ãƒ§ãƒ³è¨˜éŒ²
```sql
- id (UUID, PK)
- user_id (UUID, FK â†’ users)
- type ('meditation' | 'journaling')
- duration (INTEGER, ç§’æ•°)
- pages_completed (INTEGER, nullable)
- completed_at (TIMESTAMP)
- INDEX: (user_id, completed_at DESC)
```

#### **user_settings** - ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®š
```sql
- user_id (UUID, PK, FK â†’ users)
- meditation_duration (INTEGER, [2,5,7,10,15])
- journaling_duration (INTEGER, [60,120,300,420,600])
- journaling_break_duration (INTEGER, [5,10,15])
- theme ('light' | 'dark' | 'system')
- notifications_enabled, sound_enabled (BOOLEAN)
```

#### **daily_stats** - æ—¥æ¬¡çµ±è¨ˆï¼ˆé›†è¨ˆç”¨ï¼‰
```sql
- id (UUID, PK)
- user_id (UUID, FK â†’ users)
- stat_date (DATE)
- meditation_count, journaling_count (INTEGER)
- total_duration (INTEGER)
- UNIQUE: (user_id, stat_date)
```

#### **subscriptions** - ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ç®¡ç†ï¼ˆå°†æ¥ç”¨ï¼‰
```sql
- id (UUID, PK)
- user_id (UUID, FK â†’ users)
- plan_type ('premium_monthly' | 'premium_yearly')
- status ('active' | 'canceled' | 'expired')
- stripe_customer_id, stripe_subscription_id
- current_period_start, current_period_end
```

### 1.2 ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ«

- **ã‚»ãƒƒã‚·ãƒ§ãƒ³**: duration 1ã€œ3600ç§’ã€completed_at ã¯æœªæ¥æ—¥æ™‚ä¸å¯
- **è¨­å®š**: é¸æŠè‚¢ã¯äº‹å‰å®šç¾©ã•ã‚ŒãŸãƒªã‚¹ãƒˆã®ã¿
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼**: ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯RFC 5322æº–æ‹ ã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯12æ–‡å­—ä»¥ä¸Šï¼ˆå¤§æ–‡å­—ãƒ»æ•°å­—ãƒ»è¨˜å·å¿…é ˆï¼‰
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: ãƒ¬ãƒ¼ãƒˆåˆ¶é™ï¼ˆãƒ­ã‚°ã‚¤ãƒ³5å›/5åˆ†ã€API 100å›/åˆ†ï¼‰

---

## 2. æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### 2.1 ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- **Next.js 15** (App Router) + TypeScript
- **Tailwind CSS** + ã‚«ã‚¹ã‚¿ãƒ ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ 
- **React Query** (ã‚µãƒ¼ãƒãƒ¼çŠ¶æ…‹ç®¡ç†) - å°†æ¥çš„ã«è¿½åŠ 
- **Zustand** (ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆçŠ¶æ…‹ç®¡ç†) - å°†æ¥çš„ã«è¿½åŠ 

### 2.2 ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
- **Next.js API Routes** (Serverless Functions)
- **Supabase** (PostgreSQL + èªè¨¼ + ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½)
- **NextAuth.js v5** (èªè¨¼: Email, Google)

### 2.3 ã‚¤ãƒ³ãƒ•ãƒ©ï¼ˆå°è¦æ¨¡MVPå‘ã‘ï¼‰
- **ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°**: Vercel
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: Supabase (ç„¡æ–™ãƒ—ãƒ©ãƒ³ â†’ Pro $25/æœˆ)
- **ãƒ¡ãƒ¼ãƒ«é€ä¿¡**: Resend (èªè¨¼ãƒ¡ãƒ¼ãƒ«ã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆ)
- **ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°**: Vercel Analytics + Sentry
- **ã‚³ã‚¹ãƒˆè©¦ç®—**: $0ã€œ$50/æœˆï¼ˆã€œ1,000ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰

### 2.4 CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³

**GitHub Actions** (å“è³ªãƒã‚§ãƒƒã‚¯):
- ãƒ†ã‚¹ãƒˆå®Ÿè¡Œï¼ˆJestï¼‰
- Lintï¼ˆESLintï¼‰
- å‹ãƒã‚§ãƒƒã‚¯ï¼ˆTypeScriptï¼‰
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³ï¼ˆnpm auditï¼‰
- ãƒ“ãƒ«ãƒ‰æ¤œè¨¼

**Vercel** (è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤):
- GitHub ActionsãŒæˆåŠŸ â†’ VercelãŒè‡ªå‹•ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤
- PRã”ã¨ã«Preview URLç”Ÿæˆ
- mainãƒ–ãƒ©ãƒ³ãƒã¯æœ¬ç•ªç’°å¢ƒã«è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤

### 2.5 ä¸»è¦APIè¨­è¨ˆ

```
POST   /api/auth/signup          # æ–°è¦ç™»éŒ²
POST   /api/auth/signin          # ãƒ­ã‚°ã‚¤ãƒ³
GET    /api/sessions             # ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¸€è¦§
POST   /api/sessions             # ã‚»ãƒƒã‚·ãƒ§ãƒ³ä½œæˆ
DELETE /api/sessions/:id         # ã‚»ãƒƒã‚·ãƒ§ãƒ³å‰Šé™¤
GET    /api/sessions/stats       # çµ±è¨ˆå–å¾—
GET    /api/settings             # è¨­å®šå–å¾—
PATCH  /api/settings             # è¨­å®šæ›´æ–°
```

---

## 3. ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ 

### 3.1 ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ

**ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰**:
- Primary Purple: `#7C3AED` (ç‘æƒ³)
- Primary Blue: `#2563EB` (ãƒ¡ãƒ¢æ›¸ã)
- Background: `#FFFFFF`, `#F9FAFB`, `#F3F4F6`
- Text: `#1F2937`, `#6B7280`, `#9CA3AF`
- Border: `#E5E7EB`

**ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰**:
- Primary Purple: `#A78BFA`
- Primary Blue: `#60A5FA`
- Background: `#0A0A0A`, `#1F1F1F`, `#2A2A2A`
- Text: `#F9FAFB`, `#D1D5DB`, `#9CA3AF`

### 3.2 ã‚¿ã‚¤ãƒã‚°ãƒ©ãƒ•ã‚£

- ãƒ•ã‚©ãƒ³ãƒˆ: `-apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans JP', sans-serif`
- ã‚µã‚¤ã‚º: 12px, 14px, 16px, 18px, 20px, 24px, 30px, 36px
- ã‚¦ã‚§ã‚¤ãƒˆ: 400, 500, 600, 700

### 3.3 Core Web Vitals æœ€é©åŒ–

- **LCP** (< 2.5s): next/image, next/font
- **FID** (< 100ms): ã‚³ãƒ¼ãƒ‰åˆ†å‰²
- **CLS** (< 0.1): å›ºå®šã‚µã‚¤ã‚ºç¢ºä¿

---

## 4. ãƒ—ãƒ¬ãƒŸã‚¢ãƒ æ©Ÿèƒ½æ¡ˆï¼ˆå°†æ¥ï¼‰

### ç„¡æ–™ãƒ—ãƒ©ãƒ³
- åŸºæœ¬ã‚¿ã‚¤ãƒãƒ¼æ©Ÿèƒ½
- éå»30æ—¥é–“ã®å±¥æ­´
- ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ãƒ¼ã‚¿ã®ã¿

### ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ—ãƒ©ãƒ³ï¼ˆæœˆé¡Â¥500 / å¹´é¡Â¥5,000ï¼‰
1. ãƒãƒ«ãƒãƒ‡ãƒã‚¤ã‚¹åŒæœŸ
2. é«˜åº¦ãªåˆ†æãƒ»ãƒ¬ãƒãƒ¼ãƒˆ
3. ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ/ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
4. ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºæ©Ÿèƒ½
5. ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼æ©Ÿèƒ½
6. ã‚½ãƒ¼ã‚·ãƒ£ãƒ«æ©Ÿèƒ½

---

## 5. å®Ÿè£…ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³

### Phase 1: MVPï¼ˆ2ã€œ3ãƒ¶æœˆï¼‰

**Week 1-2: ç’°å¢ƒæ§‹ç¯‰ãƒ»èªè¨¼å®Ÿè£…**
- âœ… Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
- âœ… ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
- âœ… ç’°å¢ƒå¤‰æ•°è¨­å®š
- âœ… ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒå®Ÿè£…ï¼ˆ5ãƒ†ãƒ¼ãƒ–ãƒ«ã€ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³é©ç”¨æ¸ˆã¿ï¼‰
- âœ… NextAuth.jsè¨­å®šï¼ˆCredentialsèªè¨¼ã€JWT ã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼‰
- âœ… èªè¨¼ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£å®Ÿè£…ï¼ˆbcryptjs ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰æ¤œè¨¼ï¼‰
- âœ… ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆãƒ»ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆï¼ˆ1,337è¡Œï¼‰
- ğŸ”„ ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²æ©Ÿèƒ½ï¼ˆIssue #15ï¼‰
- ğŸ”„ ãƒ­ã‚°ã‚¤ãƒ³/ãƒ­ã‚°ã‚¢ã‚¦ãƒˆUIï¼ˆIssue #16ï¼‰
- ğŸ”„ èªè¨¼ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ï¼ˆIssue #17ï¼‰

**Week 3-4: ãƒ‡ãƒ¼ã‚¿ç§»è¡Œãƒ»APIå®Ÿè£…**
- â³ LocalStorageã‹ã‚‰DBç§»è¡Œãƒ­ã‚¸ãƒƒã‚¯
- â³ ã‚»ãƒƒã‚·ãƒ§ãƒ³CRUD API (`/api/sessions`)
- â³ è¨­å®šç®¡ç†API (`/api/settings`)
- â³ çµ±è¨ˆè¨ˆç®—API (`/api/sessions/stats`)

**Week 5-6: UIæ”¹å–„ãƒ»ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ **
- ğŸ”„ UIãƒ†ã‚­ã‚¹ãƒˆè‹±èªåŒ–ï¼ˆIssue #19ï¼‰
- ğŸ”„ Appleé¢¨ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ åˆ·æ–°ï¼ˆIssue #20ï¼‰
- â³ ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰æœ€é©åŒ–
- â³ ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œå¼·åŒ–

**Week 7-8: ãƒ†ã‚¹ãƒˆãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤**
- â³ E2Eãƒ†ã‚¹ãƒˆï¼ˆPlaywrightï¼‰
- â³ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆï¼ˆLighthouse 90+ï¼‰
- â³ Core Web Vitalså…¨é …ç›®ã‚°ãƒªãƒ¼ãƒ³
- â³ Vercelã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤

### Phase 2: æ­£å¼ãƒªãƒªãƒ¼ã‚¹ï¼ˆ1ã€œ2ãƒ¶æœˆï¼‰
- â³ ãƒ™ãƒ¼ã‚¿ãƒ†ã‚¹ãƒˆ
- â³ ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒšãƒ¼ã‚¸
- â³ æ­£å¼ãƒªãƒªãƒ¼ã‚¹

### Phase 3: æ‹¡å¼µï¼ˆ3ã€œ6ãƒ¶æœˆå¾Œï¼‰
- â³ ãƒ—ãƒ¬ãƒŸã‚¢ãƒ æ©Ÿèƒ½é–‹ç™º
- â³ Stripeæ±ºæ¸ˆçµ±åˆ

---

---

## 6. Open Issuesï¼ˆ2026-02-03æ™‚ç‚¹ï¼‰

| Issue | ã‚¿ã‚¤ãƒˆãƒ« | ä¾å­˜ | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
|-------|---------|------|-----------|
| #15 | ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²æ©Ÿèƒ½ã®å®Ÿè£… | â€” | ğŸ”„ æ¬¡ã«ç€æ‰‹ |
| #16 | ãƒ­ã‚°ã‚¤ãƒ³/ãƒ­ã‚°ã‚¢ã‚¦ãƒˆUIã®å®Ÿè£… | #15 | â³ |
| #17 | èªè¨¼ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã®å®Ÿè£… | #15, #16 | â³ |
| #19 | UIãƒ†ã‚­ã‚¹ãƒˆã®è‹±èªåŒ– | â€” | â³ |
| #20 | ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ åˆ·æ–° | â€” | â³ |

---

## 7. ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ

| ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ | æ‹…å½“ |
|------------|------|
| `meditation-journaling-expert` | Issueå®Ÿè£…ã€TDDã€GitHub MCPé€£æºã€èªè¨¼ãƒ»DB |
| `premium-design-expert` | ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã€UI/UXã€Core Web Vitalsæœ€é©åŒ– |

---

## å‡¡ä¾‹
- âœ… å®Œäº†
- ğŸ”„ å®Ÿè£…ä¸­
- â³ æœªç€æ‰‹
