# Commit Frequency Rules

## 基本方針

**こまめなコミット**を推奨します。大きな変更を1つのコミットにまとめるのではなく、小さな単位で頻繁にコミットしてください。

## コミットのタイミング

以下のいずれかに該当する場合、ユーザーにコミットを提案してください：

### 1. **新しいIssue着手前（最優先）**
- 新しいIssueに取り組む前に**必ず**未コミット変更をチェック
- 変更がある場合は**必ずコミットを提案**
- `/status` スキルでタスク提案時に自動チェック
- ブランチ作成前に必ずクリーンな状態にする

### 2. ファイル数基準
- **3ファイル以上**の変更がある場合
- PostToolUse hook（`suggest-commit.sh`）が自動的に警告を出します

### 3. 機能単位
- 1つの機能が完成した時点
- 例：新しいコンポーネント作成 → テスト追加 → コミット

### 4. テスト通過後
- TDDサイクル（Red → Green → Refactor）の各ステップ完了時
- `/tdd` スキル使用時は自動的にコミット

### 5. リファクタリング完了後
- コードの整理が完了した時点

### 6. 長時間作業後
- 15分以上経過した場合（セッション内での目安）

## コミット提案の例

```
💡 現在3ファイルの変更があります。こまめなコミットを推奨します。

【変更内容】
- components/NewFeature.tsx (新規作成)
- components/__tests__/NewFeature.test.tsx (新規作成)
- types/index.ts (型定義追加)

コミットしますか？
```

## 禁止事項

- **変更を溜め込まない**：10ファイル以上の変更を1コミットにしない
- **WIP コミット禁止**：必ず意味のある単位でコミット
- **コミットメッセージの省略禁止**：必ず詳細な説明を付ける

## 自動チェック

PostToolUse hook（`.claude/hooks/PostToolUse/suggest-commit.sh`）が以下を自動実行：
1. Edit/Write ツール使用後にトリガー
2. `git status --short` で変更ファイル数をカウント
3. しきい値（3ファイル）を超えたら警告メッセージを表示
4. AIがユーザーにコミットを提案

## コミットメッセージ規約

詳細は `git-workflow.md` を参照。
- Conventional Commits 形式（`feat:`, `fix:`, `refactor:` 等）
- HEREDOC を使用して複数行で記述
- 必ず `Co-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>` を付与
